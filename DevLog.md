# 开发日志
## 项目目标：在尽可能使用系统自身功能自主完成安全软件更新及系统安全补丁的自动部署操作
### 本文件用于记录安全更新自动部署项目遇到的问题及考量
- 基于定时任务的局限及不影响业务的正常进行的情况下，避免同时下载产生网络堵塞影响正常业务进行。
    - 不定时更新，对计划任务改为某时间段更新
        - 简化编码 相对简单
        - 控制粗糙 无法完全避免集中下载
    - 基于IP做更新错峰处理
        - 需要考虑特殊情况较多 处理逻辑复杂
        - 精确控制 避免集中下载
    - 基于服务端控制的自适应错峰更新机制
- 对以产生的日志进行定期上传
    - 只能通过FTP
    - HTTP上传需对web服务进行进一步定制
- 多网卡环境出现的FTP卡死问题
    - 处于不同网段（NAT环境）下出现的150卡死问题
    - 暂时无解
- IP控制

## 开发日志
- 2019年5月16日
    - 测试certutil的兼容性，该系统组件未包含在XP SP2系统中(终端环境系统最低版本)，故从2003 r2系统中提取该组件用于XP系统哈希校验
    - 处理组件版本兼容问题（该组件不同系统输出不一致）
- 2019年5月18日
    - 处理FTP上传下载功能 及处理FTP任务状态问题(因为历史遗留原因，该软件无法通过返回值判断是否成功与否)
- 2019年6月5日
    - 处理服务端更新清单生成
- 2019年6月8日
    - 处理XP客户端兼容问题
- 2019年6月9日
    - 增加网卡IP选择功能
- 2019年6月11日
    - FTP站点安全配置相关说明
- 2019年6月15日
    - 解决客户端身份标识问题
- 2019年6月18日
    - 增加更新任务日志上传功能，改进FTP模块适配服务端权限配置
- 2019年6月20日
    - 增加更新数字签名校验功能，引入sigcheck.exe
    - 援引地址https://docs.microsoft.com/zh-cn/sysinternals/downloads/sigcheck
